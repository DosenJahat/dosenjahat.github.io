(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{66:function(e,a,n){"use strict";n.r(a),n.d(a,"frontMatter",(function(){return l})),n.d(a,"metadata",(function(){return o})),n.d(a,"rightToc",(function(){return c})),n.d(a,"default",(function(){return m}));var t=n(2),i=n(6),r=(n(0),n(92)),l={id:"viewmodel",title:"ViewModel",sidebar_label:"ViewModel"},o={unversionedId:"mobile/viewmodel",id:"mobile/viewmodel",isDocsHomePage:!1,title:"ViewModel",description:"Pendahuluan",source:"@site/docs/mobile/viewmodel.md",slug:"/mobile/viewmodel",permalink:"/docs/mobile/viewmodel",version:"current",sidebar_label:"ViewModel",sidebar:"mobileSidebar",previous:{title:"Navigation Component",permalink:"/docs/mobile/navigation-component"}},c=[{value:"Pendahuluan",id:"pendahuluan",children:[{value:"Tujuan Pembelajaran",id:"tujuan-pembelajaran",children:[]},{value:"Alat dan Bahan",id:"alat-dan-bahan",children:[]}]},{value:"ViewModel",id:"viewmodel",children:[]},{value:"Praktikum",id:"praktikum",children:[]},{value:"Tantangan",id:"tantangan",children:[]},{value:"Bahan Bacaan",id:"bahan-bacaan",children:[]}],b={rightToc:c};function m(e){var a=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(t.a)({},b,n,{components:a,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"pendahuluan"},"Pendahuluan"),Object(r.b)("p",null,"Pada praktikum kali ini anda akan mempelajari untuk membangun aplikasi ",Object(r.b)("em",{parentName:"p"},"single\nactivity multi fragment")," dengan menggunakan ",Object(r.b)("em",{parentName:"p"},"navigation component")," dan\nviewmodel. Pendekatan ini dikenal merupakan bagian dari pola MVVM (Model View\nViewModel)."),Object(r.b)("h3",{id:"tujuan-pembelajaran"},"Tujuan Pembelajaran"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Mahasiswa mengenal tentang arsitektur MVVM."),Object(r.b)("li",{parentName:"ol"},"Mahasiswa memahami lifecycle viewmodel pada MVVM."),Object(r.b)("li",{parentName:"ol"},"Mahasiswa mampu menerapkan viewmodel pada Android.")),Object(r.b)("h3",{id:"alat-dan-bahan"},"Alat dan Bahan"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"Laptop atau PC"),Object(r.b)("li",{parentName:"ol"},"Android Studio"),Object(r.b)("li",{parentName:"ol"},"Starter Code")),Object(r.b)("h2",{id:"viewmodel"},"ViewModel"),Object(r.b)("h2",{id:"praktikum"},"Praktikum"),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Silahkan klik tautan starter project yang telah dibagikan oleh masing-masing\ndosen pengampu.")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Buka starter code yang telah disiapkan dengan menggunakan ",Object(r.b)("strong",{parentName:"p"},"Android Studio"),".\nAmati susunan file/directory yang terdapat pada starter code.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Dalam project ini terdapat project Skor yang akan diterapkan dengan pendekatan\nmenggunakan ViewModel. Project ini terdiri dari dua buah fragment yang saling\nbertukar data, untuk menjembatani hal ini dapat digunakan viewmodel. Sebagai\nreferensi, silahkan anda buka tautan\n",Object(r.b)("a",Object(t.a)({parentName:"p"},{href:"https://developer.android.com/topic/libraries/architecture/viewmodel.html#sharing"}),"ini"),"\nbagaimana caranya membagi data dengan viewmodel.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Selain menggunakan viewmodel, pada praktikum kali ini juga akan digunakan\nLiveData. Silahkan buka berkas ",Object(r.b)("inlineCode",{parentName:"p"},"SkorViewModel")," kemudian perhatikan berkas\ntersebut.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Sebuah ViewModel dibuat dengan konsep inheritance diturunkan dari class\n",Object(r.b)("inlineCode",{parentName:"p"},"ViewModel"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Pada project skor dibutuhkan dua informasi skor pada tim Home dan Away\nsehingga dibutuhkan dua buah atribut livedata. Tambahkan kode seperti yang ada\ndi bawah."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreViewModel.java"',title:'"ScoreViewModel.java"'}),"public class ScoreViewModel extends ViewModel {\n  private final MutableLiveData<ArrayList<GoalScorer>> homeGoalScorerList =\n    new MutableLiveData<>(new ArrayList<GoalScorer>());\n  private final MutableLiveData<ArrayList<GoalScorer>> awayGoalScorerList =\n    new MutableLiveData<>(new ArrayList<GoalScorer>());\n}\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Penggunaan ViewModel bertujuan juga untuk memisahkan logika dengan UI.\nTambahkan logika untuk menampilkan nilai Skor masing-masing tim pada\nviewmodel."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreViewModel.java"',title:'"ScoreViewModel.java"'}),"public class ScoreViewModel extends ViewModel {\n  private final MutableLiveData<ArrayList<GoalScorer>> homeGoalScorerList =\n    new MutableLiveData<>(new ArrayList<GoalScorer>());\n  private final MutableLiveData<ArrayList<GoalScorer>> awayGoalScorerList =\n    new MutableLiveData<>(new ArrayList<GoalScorer>());\n\n  public int getHomeScore() {\n    return homeGoalScorerList.getValue().size();\n  }\n\n  public int getAwayScore() {\n    return awayGoalScorerList.getValue().size();\n  }\n}\n")),Object(r.b)("blockquote",{parentName:"li"},Object(r.b)("p",{parentName:"blockquote"},"Penyimpanan nilai skor menggunakan LiveData sehingga dibutuhkan pengambilan\nnilai menggunakan ",Object(r.b)("inlineCode",{parentName:"p"},"getValue()")," sebelum dihitung total `size()``-nya."))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Tambahkan logika untuk penambahan pencetak gol dengan kode sebagai berikut.\nPenambahan pencetak gol berdasarkan informasi tim yang mencetak gol."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreViewModel.java"',title:'"ScoreViewModel.java"'}),"public void setGoalScorer(String team, GoalScorer goalScorer) {\n    if (team.equals(ScoreFragment.HOME)) {\n        homeGoalScorerList.getValue().add(goalScorer);\n    } else {\n        awayGoalScorerList.getValue().add(goalScorer);\n    }\n}\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Selain pemisahan logika, dalam viewmodel juga dapat digunakan untuk pemisahan\ninteraksi dengan pengguna. Tambahkan kode berikut untuk menambahkan interaksi\npada tombol."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreViewModel.java"',title:'"ScoreViewModel.java"'}),"public void onAddHomeClick(View view) {\n    ScoreFragmentDirections.GoalScorerAction action =\n    ScoreFragmentDirections.goalScorerAction(ScoreFragment.HOME);\n    Navigation.findNavController(view).navigate(action);\n}\n\npublic void onAddAwayClick(View view) {\n    ScoreFragmentDirections.GoalScorerAction action =\n    ScoreFragmentDirections.goalScorerAction(ScoreFragment.AWAY);\n    Navigation.findNavController(view).navigate(action);\n}\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Viewmodel mempunyai lifecycle berdasarkan scope owner berupa activity atau\nfragment. Definisi scope dapat dilakukan pada saat proses instansiasi. Dalam\nkasus project skor, scope viewmodel menggunakan activity. Untuk mendapatkan\nnilai activity dapat digunakan method ",Object(r.b)("inlineCode",{parentName:"p"},"requireActivity()"),". Gambaran detil\nlifecycle pada viewmodel dapat terlihat pada gambar berikut."),Object(r.b)("p",{parentName:"li"},Object(r.b)("img",Object(t.a)({parentName:"p"},{src:"https://developer.android.com/images/topic/libraries/architecture/viewmodel-lifecycle.png",alt:"Lifecycle"})))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Buka berkas ",Object(r.b)("inlineCode",{parentName:"p"},"ScoreFragment.java")," dan lakukan instansiasi viewmodel pada method\n",Object(r.b)("inlineCode",{parentName:"p"},"onCreateView()"),"."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreFragment.java"',title:'"ScoreFragment.java"'}),"viewModel = new ViewModelProvider(requireActivity()).get(ScoreViewModel.class);\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Buka berkas ",Object(r.b)("inlineCode",{parentName:"p"},"GoalFragment.java")," dan lakukan instansiasi viewmodel pada method\n",Object(r.b)("inlineCode",{parentName:"p"},"onCreateView()")," dengan cara yang sama.")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Buka kembali berkas ",Object(r.b)("inlineCode",{parentName:"p"},"ScoreFragment.java"),", dalam project ini digunakan juga\ndatabinding sehingga perlu proses untuk menghubungkan viewmodel. Tambahkan\nproses binding viewmodel dengan kode berikut."),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="ScoreFragment.java"',title:'"ScoreFragment.java"'}),"binding.setVm(viewModel);\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Kemudian untuk menambahkan interaksi penambahan pencetak gol, silahkan\ntambahkan kode berikut pada method ",Object(r.b)("inlineCode",{parentName:"p"},"onSaveClicked()")),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",Object(t.a)({parentName:"pre"},{className:"language-java",metastring:'title="GoalFragment.java" {5}',title:'"GoalFragment.java"',"{5}":!0}),"public void onSaveClicked(View view) {\n  Bundle bundle = new Bundle();\n  bundle.putParcelable(ScoreFragment.SCORER_KEY, goalScorer);\n\n  viewModel.setGoalScorer(requestKey, goalScorer);\n  Navigation.findNavController(view).navigateUp();\n}\n")))),Object(r.b)("h2",{id:"tantangan"},"Tantangan"),Object(r.b)("p",null,"Tampilkan data pemain beserta menit gol terjadi untuk masing-masing tim pada id\n",Object(r.b)("inlineCode",{parentName:"p"},"text_home_scorer")," dan ",Object(r.b)("inlineCode",{parentName:"p"},"text_away_scorer")," dengan menggunakan konsep viewmodel."),Object(r.b)("h2",{id:"bahan-bacaan"},"Bahan Bacaan"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},Object(r.b)("a",Object(t.a)({parentName:"li"},{href:"https://developer.android.com/topic/libraries/architecture/viewmodel.html"}),"https://developer.android.com/topic/libraries/architecture/viewmodel.html"))))}m.isMDXComponent=!0},92:function(e,a,n){"use strict";n.d(a,"a",(function(){return d})),n.d(a,"b",(function(){return s}));var t=n(0),i=n.n(t);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function c(e,a){if(null==e)return{};var n,t,i=function(e,a){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||(i[n]=e[n]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)n=r[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=i.a.createContext({}),m=function(e){var a=i.a.useContext(b),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},d=function(e){var a=m(e.components);return i.a.createElement(b.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return i.a.createElement(i.a.Fragment,{},a)}},u=i.a.forwardRef((function(e,a){var n=e.components,t=e.mdxType,r=e.originalType,l=e.parentName,b=c(e,["components","mdxType","originalType","parentName"]),d=m(n),u=t,s=d["".concat(l,".").concat(u)]||d[u]||p[u]||r;return n?i.a.createElement(s,o(o({ref:a},b),{},{components:n})):i.a.createElement(s,o({ref:a},b))}));function s(e,a){var n=arguments,t=a&&a.mdxType;if("string"==typeof e||t){var r=n.length,l=new Array(r);l[0]=u;var o={};for(var c in a)hasOwnProperty.call(a,c)&&(o[c]=a[c]);o.originalType=e,o.mdxType="string"==typeof e?e:t,l[1]=o;for(var b=2;b<r;b++)l[b]=n[b];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);